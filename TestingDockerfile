FROM mcr.microsoft.com/playwright:focal

WORKDIR /usr/src/app

# install node
apt-get install curl
curl -sL https://deb.nodesource.com/setup_16.x | bash
apt-get install nodejs

COPY package*.json ./

RUN npm install

COPY . ./

RUN npm run build
# run browser tests
RUN npm run test:browser:skipbuild

EXPOSE 8080

CMD [ "npm", "start" ]
